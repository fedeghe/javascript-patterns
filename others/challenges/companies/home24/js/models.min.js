H24.makeNS("H24/obj"),H24.obj.Cart=function(t,e){var i=this,n=document.createElement("div");i.butt=e,i.butt.innerHTML=H24.i18n.get("my_cart"),i.node=t,i.init(),t.appendChild(n),i.list=new H24.obj.List(n,H24.obj.CartItem),i.list.render(),H24.events.bind(t,"mouseenter",function(){this.focus()})},H24.obj.Cart.prototype.init=function(){var t=this,e=t.head=document.createElement("div"),i=t.close=document.createElement("div"),n=t.nodata=document.createElement("div");e.className="cartHeader round8",e.innerHTML=t.butt.innerHTML,i.setAttribute("data-action","hideCart"),i.className="close round10",i.innerHTML="x",n.className="nodata",n.innerHTML=H24.i18n.get("no_items"),t.node.appendChild(e),t.node.appendChild(i),t.node.appendChild(n)},H24.obj.Cart.prototype.add=function(t){var e=!1;return H24.io.post("srv/added.js",function(t){t&&H24.utils.debug(t)},e,t),H24.dom.hide(this.nodata),this.list.add([t]),this},H24.obj.Cart.prototype.remove=function(t){return this.list.remove(t),this.list.size()||H24.dom.show(this.nodata),this},H24.obj.Cart.prototype.show=function(){return H24.dom.style(this.list.dom,"maxHeight",H24.utils.screen.viewportHeight()-130+"px"),H24.dom.style(this.butt,"visibility","hidden"),H24.dom.show(this.node),this},H24.obj.Cart.prototype.hide=function(){return H24.dom.hide(this.node),H24.dom.style(this.butt,"visibility","visible"),this},H24.makeNS("H24/obj"),H24.obj.Item=function(){throw new Exception("Abstract class cannot be instantiated")},H24.obj.Item.prototype={id:"",name:"unknown",image:"itemPlaceholder.png",price:"unknown",alt:"",action:!1,tpl:'<div class="lfloat"><h2>%name_label% : %name%</h2><h3>%price_label% : %price% '+H24.setting.currency+'</h3></div><div class="rfloat"><img src="%image%" alt="%alt%" class="round8" /><button data-action="%action%" data-params="id:%id%" class="round8 rfloat">%action_butt%</button></div><br class="clearer"/>'},H24.obj.Item.prototype.set=function(t){this.origData=t,this.id=H24.utils.uniqueId+"",this.name=t.name||this.name,this.image=t.image||this.image,this.price=t.price||this.napriceme,this.alt=t.alt||this.alt,this.tpl=t.tpl||this.tpl,this.name_label=H24.i18n.get("name"),this.price_label=H24.i18n.get("price")},H24.obj.Item.prototype.getNode=function(){var t=document.createElement("div");return t.setAttribute("id",this.id),t.innerHTML=H24.string.replaceall(this.tpl,{id:this.id,name:this.name,image:this.image,price:this.price,action:this.action,action_butt:this.action_butt||"action",name_label:this.name_label||"Name",price_label:this.price_label||"Price",alt:this.alt}),t},H24.makeNS("H24/obj"),H24.obj.ListItem=function(){this.id=H24.utils.uniqueId+"",this.action="add",this.action_butt=H24.i18n.get("button_add")},H24.core.inherit(H24.obj.ListItem,H24.obj.Item),H24.makeNS("H24/obj"),H24.obj.CartItem=function(){this.action="remove",this.action_butt=H24.i18n.get("button_remove"),this.tpl='<div class="fleft"><h3>%name_label% : %name%</h3><h3>%price_label% : %price% '+H24.setting.currency+'</h3></div><div class="rleft"><div><img src="%image%" alt="%alt%" /></div><button data-action="%action%" data-params="id:%id%" class="round8">%action_butt%</button></div><br class="clearer" />'},H24.core.inherit(H24.obj.CartItem,H24.obj.Item),H24.makeNS("H24.obj"),H24.obj.List=function(t,e){this.dataEls=[],this.elements=[],this.Item=e,this.node=t,t.innerHTML="",this.dom=document.createElement("ul"),this.rendered=!1},H24.obj.List.prototype.add=function(t){var e,i,n,o,a,s=this;for(n=0,o=t.length;o>n;n++)i=document.createElement("li"),i.className="round8",e=new s.Item,e.set(t[n]),a=e.getNode(),this.elements.push(a),this.dataEls.push(t[n]),i.appendChild(a),this.dom.appendChild(i);return s},H24.obj.List.prototype.remove=function(t){for(var e=0,i=this.elements.length;i>e;e++)if(this.elements[e].id==t)return H24.dom.remove(this.elements[e].parentNode),void this.elements.splice(e,1)},H24.obj.List.prototype.size=function(){return this.elements.length},H24.obj.List.prototype.render=function(){this.rendered||(this.rendered=!0,this.node.appendChild(this.dom))},H24.obj.List.prototype.get=function(t){for(var e=0,i=this.elements.length;i>e;e++)if(this.elements[e].id==t)return this.dataEls[e];return!1};